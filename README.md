# 桃園機場捷運 3D 路網圖系統

一個使用 React 和 Three.js 構建的 3D 互動式桃園機場捷運路網可視化系統。

## ✨ 功能特色

### 🚇 路網展示
- **3D 路網圖**：以俯視 3D 視角展現桃園機場捷運完整路線
- **上下行分離**：清楚區分上行和下行路線，使用不同顏色標示
- **動態路段**：支持路段狀態變更（正常/維護/延誤/關閉）
- **即時變色**：路段可根據狀態動態變色

### 🚊 列車系統
- **3D 列車模型**：精美的 3D 列車外觀
- **即時位置**：列車在路段上的真實位置顯示
- **動態移動**：模擬列車沿軌道行駛
- **類型區分**：支援直達車和普通車兩種類型

### 💬 互動功能
- **列車詳情**：點擊列車顯示詳細資訊彈窗
- **懸停提示**：滑鼠懸停列車顯示基本資訊
- **路段互動**：點擊路段可切換其狀態
- **3D 控制**：支持滑鼠拖拽旋轉、滾輪縮放

### 📊 狀態監控
- **網路狀態面板**：即時顯示整體路網運行狀況
- **列車統計**：顯示運行中/停駛/維護中的列車數量
- **路段統計**：顯示正常/異常路段數量和比例
- **即時警告**：延誤、維護等異常狀況提醒

## 🏗️ 技術架構

### 前端技術棧
- **React 18** - 前端框架
- **TypeScript** - 類型安全
- **Three.js** - 3D 渲染引擎
- **@react-three/fiber** - React Three.js 封裝
- **@react-three/drei** - Three.js 工具庫
- **Material-UI** - UI 組件庫
- **Zustand** - 狀態管理
- **Vite** - 建構工具

### 專案結構
```
src/
├── components/          # React 組件
│   ├── Scene/          # 3D 場景組件
│   │   └── Scene.tsx
│   ├── Railway/        # 路網相關組件
│   │   ├── RailwayRenderer.tsx
│   │   ├── SegmentRenderer.tsx
│   │   ├── StationRenderer.tsx
│   │   ├── TrainRenderer.tsx
│   │   └── TrainModel.tsx
│   └── UI/             # 用戶界面組件
│       ├── UIOverlay.tsx
│       ├── NetworkStatus.tsx
│       ├── HoverInfo.tsx
│       └── TrainDetailModal.tsx
├── types/              # TypeScript 類型定義
│   └── railway.ts
├── stores/             # 狀態管理
│   └── RailwayStore.tsx
├── config/             # 配置文件
│   └── taoyuanAirportLine.ts
└── utils/              # 工具函數
```

## 🚀 快速開始

### 安裝依賴
```bash
npm install
```

### 啟動開發服務器
```bash
npm run dev
```

應用將在 `http://localhost:5173` 啟動

### 建構生產版本
```bash
npm run build
```

### 預覽生產版本
```bash
npm run preview
```

## 🎮 操作指南

### 基本操作
- **旋轉視角**：滑鼠左鍵拖拽
- **縮放**：滑鼠滾輪
- **平移**：滑鼠右鍵拖拽

### 互動功能
- **查看列車詳情**：點擊任一列車
- **切換路段狀態**：點擊路段（藍色/粉色線條）
- **查看懸停資訊**：將滑鼠懸停在列車上

## 🎨 視覺設計

### 顏色系統
- **上行路線**：`#4fc3f7` （淺藍色）
- **下行路線**：`#ff4081` （粉紅色）
- **一般車站**：`#2196f3` （藍色）
- **轉乘站**：`#4caf50` （綠色）
- **終點站**：`#f44336` （紅色）
- **直達車**：`#e91e63` （深粉色）
- **普通車**：`#3f51b5` （深藍色）

### 狀態指示
- **正常**：原始顏色
- **維護**：`#ff9800` （橙色）
- **延誤**：`#ffeb3b` （黃色，閃爍）
- **關閉**：`#f44336` （紅色）

## 📋 路網資料

### 桃園機場捷運站點
- **A1** 台北車站（終點站）
- **A2** 三重
- **A3** 新北產業園區
- **A4** 新莊副都心（轉乘站）
- **A5** 泰山
- **A6** 泰山貴和
- **A7** 體育大學
- **A8** 長庚醫院
- **A9** 林口
- **A10** 山鼻
- **A11** 坑口
- **A12** 機場第一航廈（終點站）
- **A13** 機場第二航廈（終點站）

### 列車類型
- **直達車（Express）**：僅停靠主要站點，速度較快
- **普通車（Commuter）**：停靠所有站點，速度較慢

## 🔧 自訂與擴展

### 添加新路線
1. 在 `src/config/` 目錄創建新的路網配置文件
2. 參考 `taoyuanAirportLine.ts` 的結構定義站點、路段和列車
3. 在應用中載入新的配置

### 修改視覺效果
- 調整 `Scene.tsx` 中的燈光和環境設定
- 修改各 Renderer 組件中的材質和顏色
- 調整 `vite.config.ts` 中的路徑別名

### 擴展互動功能
- 在相應的 Renderer 組件中添加事件處理
- 使用 Zustand store 管理新的狀態
- 在 UI 組件中添加新的用戶界面元素

## 🛠️ 開發指令

```bash
# 開發
npm run dev

# 建構
npm run build

# 預覽建構結果
npm run preview

# 程式碼檢查
npm run lint

# 型別檢查
npm run typecheck
```

## 📝 授權

本專案採用 MIT 授權條款。

## 🤝 貢獻

歡迎提交 Issue 和 Pull Request 來改善此專案！

---

**作者**：Isle  
**版本**：1.0.0  
**最後更新**：2025-08-12